<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Name | Multidiscipline Portfolio</title>
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    
    <!-- Custom Styles -->
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #111827; /* bg-gray-900 */
            color: #F3F4F6; /* text-gray-200 */
        }
        .nav-link.active {
            color: #38bdf8; /* text-sky-400 */
            font-weight: 600;
        }
        /* Hide all page sections by default except for the home page */
        .page-section:not(#home) {
            display: none;
        }
        /* Animation for sections fading in on scroll/navigation */
        .fade-in-section {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease-out, transform 0.6s ease-out;
        }
        .fade-in-section.is-visible {
            opacity: 1;
            transform: translateY(0);
        }
    </style>
</head>
<body class="antialiased">

    <!-- Header & Navigation -->
    <header class="bg-gray-900/80 backdrop-blur-sm fixed top-0 left-0 right-0 z-50 border-b border-gray-700">
        <div class="container mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex items-center justify-between h-16">
                <!-- Logo / Site Title -->
                <div class="flex-shrink-0">
                    <a href="#home" data-page="home" class="nav-link text-xl font-bold text-white">
                        Your Name <span class="text-sky-400">/</span> Portfolio
                    </a>
                </div>
                
                <!-- Desktop Navigation -->
                <nav class="hidden md:block">
                    <div id="nav-links" class="ml-10 flex items-baseline space-x-4">
                        <a href="#home" data-page="home" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300 active">Home</a>
                        <a href="#about" data-page="about" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300">About</a>
                        <a href="#portfolio" data-page="portfolio" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300">Portfolio</a>
                        <a href="#content" data-page="content" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300">Content</a>
                        <a href="#contact" data-page="contact" class="nav-link px-3 py-2 rounded-md text-sm font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300">Contact</a>
                    </div>
                </nav>
                
                <!-- Mobile Menu Button -->
                <div class="-mr-2 flex md:hidden">
                    <button id="mobile-menu-button" type="button" class="bg-gray-800 inline-flex items-center justify-center p-2 rounded-md text-gray-400 hover:text-white hover:bg-gray-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-800 focus:ring-white" aria-controls="mobile-menu" aria-expanded="false">
                        <span class="sr-only">Open main menu</span>
                        <svg class="block h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16" /></svg>
                        <svg class="hidden h-6 w-6" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke="currentColor" aria-hidden="true"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M6 18L18 6M6 6l12 12" /></svg>
                    </button>
                </div>
            </div>
        </div>

        <!-- Mobile Menu -->
        <div class="md:hidden hidden" id="mobile-menu">
            <div id="mobile-nav-links" class="px-2 pt-2 pb-3 space-y-1 sm:px-3">
                <a href="#home" data-page="home" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300 active">Home</a>
                <a href="#about" data-page="about" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300">About</a>
                <a href="#portfolio" data-page="portfolio" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300">Portfolio</a>
                <a href="#content" data-page="content" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300">Content</a>
                <a href="#contact" data-page="contact" class="nav-link block px-3 py-2 rounded-md text-base font-medium text-gray-300 hover:text-white hover:bg-gray-700 transition-colors duration-300">Contact</a>
            </div>
        </div>
    </header>

    <main>
        <!-- Home Section -->
        <section id="home" class="page-section pt-32 pb-20 bg-gray-900 is-visible fade-in-section">
            <div class="text-center px-4">
                <h1 class="text-4xl md:text-6xl font-extrabold text-white tracking-tight">
                    Innovating at the Intersection of
                    <span class="block text-sky-400">Technology & Science</span>
                </h1>
                <p class="mt-4 max-w-2xl mx-auto text-lg md:text-xl text-gray-300">
                    A multidisciplinary portfolio showcasing projects in Computer Science, Electrical Engineering, Mathematics, and more.
                </p>
                <div class="mt-8 flex justify-center gap-4">
                    <a href="#portfolio" data-page="portfolio" class="nav-link inline-block bg-sky-500 text-white font-semibold px-8 py-3 rounded-md hover:bg-sky-600 transition-transform transform hover:scale-105 duration-300">View My Work</a>
                    <a href="#contact" data-page="contact" class="nav-link inline-block bg-gray-700 text-white font-semibold px-8 py-3 rounded-md hover:bg-gray-600 transition-transform transform hover:scale-105 duration-300">Get In Touch</a>
                </div>
            </div>

            <!-- Latest Work Section -->
            <div class="mt-20 lg:mt-24 w-full max-w-6xl mx-auto px-4">
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-x-12 gap-y-16">
                    <div>
                        <h2 class="text-3xl font-bold text-white mb-6 text-left border-b-2 border-sky-500 pb-2">Latest Projects</h2>
                        <div id="latest-portfolio-grid" class="space-y-8">
                            <!-- Latest projects will be injected here -->
                            <p class="text-gray-400">Loading latest projects...</p>
                        </div>
                    </div>
                    <div>
                        <h2 class="text-3xl font-bold text-white mb-6 text-left border-b-2 border-sky-500 pb-2">Latest Articles</h2>
                        <div id="latest-articles-grid" class="space-y-8">
                            <!-- Latest articles will be injected here -->
                            <p class="text-gray-400">Loading latest articles...</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- About Section -->
        <section id="about" class="page-section py-20 lg:py-32 bg-gray-800 fade-in-section">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center text-white mb-12">About Me</h2>
                <div class="flex flex-col md:flex-row items-center gap-12">
                    <div class="md:w-1/3 text-center">
                        <img src="https://placehold.co/400x400/374151/E5E7EB?text=Your+Photo" alt="Your Name" class="rounded-full w-64 h-64 mx-auto object-cover border-4 border-sky-500 shadow-lg">
                    </div>
                    <div class="md:w-2/3">
                        <h3 class="text-2xl font-semibold text-sky-400 mb-2">A Passionate Engineer & Problem Solver</h3>
                        <p class="text-gray-300 mb-4">
                            Hello! I'm [Your Name], a dedicated and versatile engineer with a deep-rooted passion for solving complex problems. My background spans across Computer Engineering, Electronics, and applied Mathematics, allowing me to approach challenges with a unique, holistic perspective.
                        </p>
                        <p class="text-gray-300 mb-6">
                            Whether I'm developing efficient software, designing intricate circuits, or modeling complex systems, my goal is to create solutions that are not only functional but also elegant and robust. This portfolio is a collection of my journey and the projects I'm proud of.
                        </p>
                        <h4 class="text-xl font-semibold text-white mb-4">Core Skills</h4>
                        <div class="flex flex-wrap gap-2">
                           <span class="bg-gray-700 text-sky-300 text-sm font-medium px-3 py-1 rounded-full">Python</span>
                           <span class="bg-gray-700 text-sky-300 text-sm font-medium px-3 py-1 rounded-full">C++</span>
                           <span class="bg-gray-700 text-sky-300 text-sm font-medium px-3 py-1 rounded-full">MATLAB</span>
                           <span class="bg-gray-700 text-sky-300 text-sm font-medium px-3 py-1 rounded-full">VHDL</span>
                           <span class="bg-gray-700 text-sky-300 text-sm font-medium px-3 py-1 rounded-full">PCB Design</span>
                           <span class="bg-gray-700 text-sky-300 text-sm font-medium px-3 py-1 rounded-full">Data Analysis</span>
                           <span class="bg-gray-700 text-sky-300 text-sm font-medium px-3 py-1 rounded-full">Machine Learning</span>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- Portfolio Section -->
        <section id="portfolio" class="page-section py-20 lg:py-32 bg-gray-900 fade-in-section">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center text-white mb-4">Portfolio</h2>
                <p class="text-center text-gray-400 mb-12 max-w-2xl mx-auto">Here are some of the projects I've worked on. Use the filters to see projects from specific disciplines.</p>
                
                <div id="portfolio-filters" class="flex justify-center flex-wrap gap-2 mb-12">
                    <button class="filter-btn active bg-sky-500 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="all">All</button>
                    <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="computer">Computer Eng.</button>
                    <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="electronic">Electronic Eng.</button>
                    <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="math">Mathematics</button>
                    <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="electric">Electric Eng.</button>
                </div>

                <div id="portfolio-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="text-center col-span-full text-gray-400">Loading projects...</div>
                </div>
            </div>
        </section>

        <!-- Content Section -->
        <section id="content" class="page-section py-20 lg:py-32 bg-gray-800 fade-in-section">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center text-white mb-4">Content Archive</h2>
                <p class="text-center text-gray-400 mb-12 max-w-2xl mx-auto">A collection of my articles, tutorials, and project breakdowns.</p>
                
                 <div id="content-filters" class="flex justify-center flex-wrap gap-2 mb-12">
                    <button class="filter-btn active bg-sky-500 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="all">All</button>
                    <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="electronics">Electronics</button>
                    <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="software">Software</button>
                    <button class="filter-btn bg-gray-700 hover:bg-gray-600 text-white px-4 py-2 rounded-md text-sm font-semibold" data-filter="math">Mathematics</button>
                </div>
                
                <div id="content-grid" class="space-y-12 max-w-4xl mx-auto">
                    <div class="text-center text-gray-400">Loading articles...</div>
                </div>
            </div>
        </section>
        
        <!-- Contact Section -->
        <section id="contact" class="page-section py-20 lg:py-32 bg-gray-900 fade-in-section">
            <div class="container mx-auto px-4 sm:px-6 lg:px-8">
                <h2 class="text-3xl font-bold text-center text-white mb-4">Get In Touch</h2>
                <p class="text-center text-gray-400 mb-12 max-w-2xl mx-auto">Have a question, an opportunity, or just want to connect? Feel free to reach out!</p>
                
                <div class="max-w-xl mx-auto">
                    <form id="contact-form" class="space-y-6">
                        <div>
                            <label for="name" class="block text-sm font-medium text-gray-300">Full Name</label>
                            <input type="text" name="name" id="name" required class="mt-1 block w-full bg-gray-800 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500">
                        </div>
                        <div>
                            <label for="email" class="block text-sm font-medium text-gray-300">Email Address</label>
                            <input type="email" name="email" id="email" required class="mt-1 block w-full bg-gray-800 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500">
                        </div>
                        <div>
                            <label for="message" class="block text-sm font-medium text-gray-300">Message</label>
                            <textarea name="message" id="message" rows="4" required class="mt-1 block w-full bg-gray-800 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500"></textarea>
                        </div>
                        <div>
                            <button type="submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500 transition-colors duration-300">
                                Send Message
                            </button>
                        </div>
                    </form>
                    <div id="form-success-message" class="hidden mt-4 text-center p-4 bg-green-500/20 text-green-300 rounded-md">
                        Thank you for your message! I'll get back to you soon.
                    </div>
                </div>
            </div>
        </section>

        <!-- Admin Panel Section -->
        <section id="admin" class="page-section py-20 lg:py-32 bg-gray-900 fade-in-section">
             <div class="max-w-4xl mx-auto p-8">
                <h1 class="text-3xl font-bold text-sky-400 mb-8 text-center">Content Management</h1>
                <p class="text-center text-gray-400 mb-2">User ID: <span id="userId" class="font-mono"></span></p>

                <div class="bg-gray-800 p-8 rounded-lg shadow-lg mb-8">
                    <h2 class="text-2xl font-semibold text-white mb-6">Add New Portfolio Project</h2>
                    <form id="project-form" class="space-y-6">
                        <div>
                            <label for="p-title" class="block text-sm font-medium text-gray-300">Project Title</label>
                            <input type="text" name="title" id="p-title" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500">
                        </div>
                        <div>
                            <label for="p-description" class="block text-sm font-medium text-gray-300">Description</label>
                            <textarea name="description" id="p-description" rows="3" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500"></textarea>
                        </div>
                         <div>
                            <label for="p-category" class="block text-sm font-medium text-gray-300">Category</label>
                            <select name="category" id="p-category" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500">
                                <option value="computer">Computer Eng.</option>
                                <option value="electronic">Electronic Eng.</option>
                                <option value="math">Mathematics</option>
                                <option value="electric">Electric Eng.</option>
                            </select>
                        </div>
                        <div>
                            <label for="p-image" class="block text-sm font-medium text-gray-300">Image URL (e.g., from placehold.co)</label>
                            <input type="url" name="imageUrl" id="p-image" placeholder="https://placehold.co/600x400/..." class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500">
                        </div>
                        <div>
                            <button type="submit" id="p-submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm font-medium text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500">Add Project</button>
                        </div>
                    </form>
                </div>

                <div class="bg-gray-800 p-8 rounded-lg shadow-lg">
                    <h2 class="text-2xl font-semibold text-white mb-6">Add New Article</h2>
                    <form id="article-form" class="space-y-6">
                        <div>
                            <label for="a-title" class="block text-sm font-medium text-gray-300">Article Title</label>
                            <input type="text" name="title" id="a-title" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500">
                        </div>
                        <div>
                            <label for="a-content" class="block text-sm font-medium text-gray-300">Content (HTML allowed)</label>
                            <textarea name="content" id="a-content" rows="6" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500"></textarea>
                        </div>
                        <div>
                            <label for="a-category" class="block text-sm font-medium text-gray-300">Category</label>
                            <select name="category" id="a-category" required class="mt-1 block w-full bg-gray-700 border-gray-600 rounded-md shadow-sm py-3 px-4 text-white focus:outline-none focus:ring-sky-500 focus:border-sky-500">
                                <option value="electronics">Electronics</option>
                                <option value="software">Software</option>
                                <option value="math">Mathematics</option>
                            </select>
                        </div>
                        <div>
                            <button type="submit" id="a-submit" class="w-full flex justify-center py-3 px-4 border border-transparent rounded-md shadow-sm font-medium text-white bg-sky-600 hover:bg-sky-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-sky-500">Add Article</button>
                        </div>
                    </form>
                </div>
                
                <div id="success-message" class="hidden fixed top-20 right-5 bg-green-500 text-white py-3 px-5 rounded-lg shadow-xl z-50">
                    Content added successfully!
                </div>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-800 border-t border-gray-700">
        <div class="container mx-auto py-8 px-4 sm:px-6 lg:px-8 text-center text-gray-400">
             <div class="flex justify-center space-x-6 mb-4">
                <a href="#" class="text-gray-400 hover:text-white transition-colors"><span class="sr-only">GitHub</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path fill-rule="evenodd" d="M12 2C6.477 2 2 6.477 2 12c0 4.418 2.865 8.168 6.839 9.492.5.092.682-.217.682-.482 0-.237-.009-.868-.014-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.031-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.203 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.338 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.001 10.001 0 0022 12c0-5.523-4.477-10-10-10z" clip-rule="evenodd" /></svg></a>
                <a href="#" class="text-gray-400 hover:text-white transition-colors"><span class="sr-only">LinkedIn</span><svg class="h-6 w-6" fill="currentColor" viewBox="0 0 24 24" aria-hidden="true"><path d="M19 0h-14c-2.761 0-5 2.239-5 5v14c0 2.761 2.239 5 5 5h14c2.762 0 5-2.239 5-5v-14c0-2.761-2.238-5-5-5zm-11 19h-3v-11h3v11zm-1.5-12.268c-.966 0-1.75-.79-1.75-1.764s.784-1.764 1.75-1.764 1.75.79 1.75 1.764-.783 1.764-1.75 1.764zm13.5 12.268h-3v-5.604c0-3.368-4-3.113-4 0v5.604h-3v-11h3v1.765c1.396-2.586 7-2.777 7 2.476v6.759z"/></svg></a>
                <a href="#admin" data-page="admin" class="nav-link text-gray-400 hover:text-white transition-colors">Admin Panel</a>
             </div>
            <p>&copy; 2025 Your Name. All Rights Reserved.</p>
        </div>
    </footer>
    
    <!-- Firebase Libraries -->
    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";
        import { getFirestore, collection, onSnapshot, query, orderBy, addDoc, serverTimestamp, limit } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";

        // --- Main Application Logic ---
        function runApplication() {
            // --- STEP 1: Firebase Initialization ---
            const envFirebaseConfig = typeof __firebase_config !== 'undefined' ? __firebase_config : null;

            // --- STEP 2: PASTE YOUR CONFIG FOR LOCAL TESTING ---
            const localFirebaseConfig = {
              apiKey: "AIza...",
              authDomain: "your-project.firebaseapp.com",
              projectId: "your-project-id",
              storageBucket: "your-project.appspot.com",
              messagingSenderId: "1234567890",
              appId: "1:1234567890:web:abcdef123456"
            };

            const firebaseConfig = envFirebaseConfig ? JSON.parse(envFirebaseConfig) : localFirebaseConfig;
            
            let db, auth, appId;
            let isAuthReady = false;
            
            // --- Initialize App ---
            try {
                if (!firebaseConfig.apiKey || firebaseConfig.apiKey === "AIza...") {
                    throw new Error("Firebase configuration is missing. Please paste your project's firebaseConfig object into the `localFirebaseConfig` variable in the script.");
                }
                const app = initializeApp(firebaseConfig);
                auth = getAuth(app);
                db = getFirestore(app);
                appId = firebaseConfig.appId;
            } catch(e) {
                console.error("Firebase initialization error:", e);
                const errorDiv = document.createElement('div');
                errorDiv.className = "bg-red-800 text-white text-center p-4 fixed top-0 left-0 w-full z-50";
                errorDiv.innerHTML = `<strong>Error:</strong> ${e.message}`;
                document.body.prepend(errorDiv);
                return; 
            }

            // --- Single Page App Navigation ---
            const pageSections = document.querySelectorAll('.page-section');
            const allNavLinks = document.querySelectorAll('.nav-link');

            function showPage(pageId) {
                if (!pageId) return;
                pageSections.forEach(section => {
                    section.style.display = section.id === pageId ? 'block' : 'none';
                    if (section.id === pageId) {
                        setTimeout(() => section.classList.add('is-visible'), 10);
                    } else {
                        section.classList.remove('is-visible');
                    }
                });
                allNavLinks.forEach(link => {
                    link.classList.toggle('active', link.dataset.page === pageId);
                });
                window.scrollTo(0, 0);
            }

            allNavLinks.forEach(link => {
                link.addEventListener('click', (e) => {
                    e.preventDefault();
                    const pageId = link.dataset.page;
                    showPage(pageId);
                    const mobileMenu = document.getElementById('mobile-menu');
                    if (!mobileMenu.classList.contains('hidden')) {
                        mobileMenu.classList.add('hidden');
                        document.getElementById('mobile-menu-button').querySelectorAll('svg').forEach(icon => icon.classList.toggle('hidden'));
                    }
                });
            });

            // --- Authentication ---
            onAuthStateChanged(auth, async (user) => {
                if (user) {
                    document.getElementById('userId').textContent = user.uid;
                    if (!isAuthReady) {
                        isAuthReady = true;
                        loadPortfolio();
                        loadContent();
                        loadLatestPortfolio();
                        loadLatestArticles();
                    }
                } else {
                    isAuthReady = false;
                    try {
                        const token = typeof __initial_auth_token !== 'undefined' ? __initial_auth_token : null;
                        if (token) {
                            await signInWithCustomToken(auth, token);
                        } else {
                            await signInAnonymously(auth);
                        }
                    } catch (error) {
                        console.error("Authentication failed:", error);
                    }
                }
            });

            // --- Firestore Data Loading ---
            function loadPortfolio() {
                const grid = document.getElementById('portfolio-grid');
                const path = `artifacts/${appId}/public/data/projects`;
                const q = query(collection(db, path), orderBy('createdAt', 'desc'));

                onSnapshot(q, (snapshot) => {
                    if (snapshot.empty) {
                        grid.innerHTML = '<p class="text-center col-span-full">No projects found. Add some in the Admin Panel!</p>';
                        return;
                    }
                    grid.innerHTML = '';
                    snapshot.forEach(doc => {
                        const project = doc.data();
                        const color = project.categoryColor || 'gray';
                        grid.innerHTML += `
                            <div class="portfolio-item group" data-category="${project.category}">
                                <div class="bg-gray-800 rounded-lg overflow-hidden shadow-lg hover:shadow-sky-500/20 transition-all duration-300 transform hover:-translate-y-2 h-full flex flex-col">
                                    <img src="${project.imageUrl}" alt="${project.title}" class="w-full h-48 object-cover" onerror="this.onerror=null;this.src='https://placehold.co/600x400/1F2937/9CA3AF?text=Image+Error';">
                                    <div class="p-6 flex flex-col flex-grow">
                                        <span class="inline-block bg-${color}-500/20 text-${color}-300 text-xs font-semibold px-2.5 py-0.5 rounded-full mb-2 self-start">${project.categoryTag}</span>
                                        <h3 class="text-xl font-semibold text-white mb-2">${project.title}</h3>
                                        <p class="text-gray-400 text-sm mb-4 flex-grow">${project.description}</p>
                                        <a href="#" class="text-sky-400 hover:text-sky-300 font-semibold text-sm mt-auto">View Details &rarr;</a>
                                    </div>
                                </div>
                            </div>`;
                    });
                }, error => {
                    console.error("Error loading projects:", error);
                    grid.innerHTML = `<p class="text-center col-span-full text-red-400">Error: ${error.message}</p>`;
                });
            }

            function loadContent() {
                const grid = document.getElementById('content-grid');
                const path = `artifacts/${appId}/public/data/articles`;
                const q = query(collection(db, path), orderBy('createdAt', 'desc'));

                onSnapshot(q, (snapshot) => {
                    if (snapshot.empty) {
                        grid.innerHTML = '<p class="text-center">No articles found. Add some in the Admin Panel!</p>';
                        return;
                    }
                    grid.innerHTML = '';
                    snapshot.forEach(doc => {
                        const article = doc.data();
                        const date = article.createdAt?.toDate().toLocaleDateString('en-US', { year: 'numeric', month: 'long', day: 'numeric' }) || '';
                        grid.innerHTML += `
                            <div class="content-entry bg-gray-900 p-8 rounded-lg shadow-lg" data-category="${article.category}">
                                <p class="text-sm text-gray-400 mb-2">${date}</p>
                                <h3 class="text-2xl font-bold text-sky-400 mb-4">${article.title}</h3>
                                <div class="prose prose-invert max-w-none text-gray-300">${article.content}</div>
                            </div>`;
                    });
                }, error => {
                    console.error("Error loading articles:", error);
                    grid.innerHTML = `<p class="text-center text-red-400">Error: ${error.message}</p>`;
                });
            }
            
            function loadLatestPortfolio() {
                const grid = document.getElementById('latest-portfolio-grid');
                const path = `artifacts/${appId}/public/data/projects`;
                const q = query(collection(db, path), orderBy('createdAt', 'desc'), limit(2));

                onSnapshot(q, (snapshot) => {
                    if (snapshot.empty) {
                        grid.innerHTML = '<p class="text-gray-400">No projects to display yet.</p>';
                        return;
                    }
                    grid.innerHTML = '';
                    snapshot.forEach(doc => {
                        const project = doc.data();
                        const color = project.categoryColor || 'gray';
                        grid.innerHTML += `
                            <div class="bg-gray-800 rounded-lg p-4 flex items-center gap-4 hover:bg-gray-700/50 transition-colors">
                                <img src="${project.imageUrl}" alt="${project.title}" class="w-24 h-24 object-cover rounded-md flex-shrink-0" onerror="this.onerror=null;this.src='https://placehold.co/96x96/1F2937/9CA3AF?text=IMG';">
                                <div>
                                    <span class="inline-block bg-${color}-500/20 text-${color}-300 text-xs font-semibold px-2 py-0.5 rounded-full mb-1">${project.categoryTag}</span>
                                    <h3 class="font-semibold text-white">${project.title}</h3>
                                    <p class="text-sm text-gray-400">${project.description.substring(0, 60)}...</p>
                                </div>
                            </div>
                        `;
                    });
                }, error => {
                    console.error("Error loading latest projects:", error);
                    grid.innerHTML = `<p class="text-red-400">Error: ${error.message}</p>`;
                });
            }

            function loadLatestArticles() {
                const grid = document.getElementById('latest-articles-grid');
                const path = `artifacts/${appId}/public/data/articles`;
                const q = query(collection(db, path), orderBy('createdAt', 'desc'), limit(2));

                onSnapshot(q, (snapshot) => {
                    if (snapshot.empty) {
                        grid.innerHTML = '<p class="text-gray-400">No articles to display yet.</p>';
                        return;
                    }
                    grid.innerHTML = '';
                    snapshot.forEach(doc => {
                        const article = doc.data();
                        const date = article.createdAt?.toDate().toLocaleDateString('en-US', { month: 'short', day: 'numeric' }) || '';
                        grid.innerHTML += `
                            <div class="bg-gray-800 rounded-lg p-4 hover:bg-gray-700/50 transition-colors">
                                <p class="text-sm text-gray-500">${date}</p>
                                <h3 class="font-semibold text-white mt-1">${article.title}</h3>
                                <p class="text-sm text-gray-400 mt-2">${article.summary}</p>
                            </div>
                        `;
                    });
                }, error => {
                    console.error("Error loading latest articles:", error);
                    grid.innerHTML = `<p class="text-red-400">Error: ${error.message}</p>`;
                });
            }

            // --- Filtering Logic ---
            function setupFilter(filterContainerId, gridId, itemSelector) {
                const container = document.getElementById(filterContainerId);
                if (!container) return;
                container.addEventListener('click', (e) => {
                    if (!e.target.matches('.filter-btn')) return;

                    const currentActive = container.querySelector('.active.bg-sky-500');
                    if(currentActive) currentActive.classList.replace('bg-sky-500','bg-gray-700');
                    
                    e.target.classList.replace('bg-gray-700', 'bg-sky-500');
                    e.target.classList.add('active');

                    const filter = e.target.dataset.filter;
                    const grid = document.querySelector(gridId);
                    if(grid) {
                        const items = grid.querySelectorAll(itemSelector);
                        items.forEach(item => {
                             item.style.display = (filter === 'all' || item.dataset.category === filter) ? 'block' : 'none';
                        });
                    }
                });
            }
            setupFilter('portfolio-filters', '#portfolio-grid', '.portfolio-item');
            setupFilter('content-filters', '#content-grid', '.content-entry');

            // --- Admin Panel Form Submission ---
            async function handleFormSubmit(e, collectionName, form, detailsFn) {
                e.preventDefault();
                if (!auth.currentUser) {
                    alert("Authentication required.");
                    return;
                }
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());
                Object.assign(data, detailsFn ? detailsFn(data) : {});
                data.createdAt = serverTimestamp();
                
                try {
                    const path = `artifacts/${appId}/public/data/${collectionName}`;
                    await addDoc(collection(db, path), data);
                    form.reset();
                    const msg = document.getElementById('success-message');
                    msg.classList.remove('hidden');
                    setTimeout(() => msg.classList.add('hidden'), 3000);
                } catch (error) {
                    console.error(`Error adding ${collectionName}:`, error);
                    alert(`Error: ${error.message}`);
                }
            }

            document.getElementById('project-form').addEventListener('submit', (e) => handleFormSubmit(e, 'projects', e.target, (data) => {
                const category = data.category;
                const categoryDetails = {
                    computer: { tag: "Computer Eng.", color: "blue" },
                    electronic: { tag: "Electronic Eng.", color: "green" },
                    math: { tag: "Mathematics", color: "purple" },
                    electric: { tag: "Electric Eng.", color: "yellow" }
                };
                return {
                    imageUrl: data.imageUrl || `https://placehold.co/600x400/1F2937/9CA3AF?text=${encodeURIComponent(data.title)}`,
                    categoryTag: categoryDetails[category].tag,
                    categoryColor: categoryDetails[category].color
                };
            }));
            
            document.getElementById('article-form').addEventListener('submit', (e) => handleFormSubmit(e, 'articles', e.target, (data) => ({
                 summary: data.content.replace(/<[^>]*>?/gm, '').substring(0, 150) + '...'
            })));

            // --- Other Event Listeners ---
            document.getElementById('mobile-menu-button').addEventListener('click', (e) => {
                document.getElementById('mobile-menu').classList.toggle('hidden');
                e.currentTarget.querySelectorAll('svg').forEach(icon => icon.classList.toggle('hidden'));
            });

            document.getElementById('contact-form').addEventListener('submit', (e) => {
                e.preventDefault();
                e.target.reset();
                const msg = document.getElementById('form-success-message');
                msg.classList.remove('hidden');
                setTimeout(() => msg.classList.add('hidden'), 5000);
            });
        }

        // Run the main application logic
        runApplication();

    </script>
</body>
</html>
